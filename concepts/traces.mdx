---
title: Traces
---

import SnippetPythonGalileoLogger from '/snippets/code/python/concepts/traces/galileo-logger.mdx'
import SnippetTSGalileoLogger from '/snippets/code/typescript/concepts/traces/galileo-logger.mdx'
import SnippetPythonContextManager from '/snippets/code/python/concepts/traces/context-manager.mdx'
import SnippetTSContextWrapper from '/snippets/code/typescript/concepts/traces/context-wrapper.mdx'
import SnippetPythonOpenAIWrapper from '/snippets/code/python/concepts/traces/openai-wrapper.mdx'
import SnippetTSOpenAIWrapper from '/snippets/code/typescript/concepts/traces/openai-wrapper.mdx'
import SnippetPythonDecorator from '/snippets/code/python/concepts/traces/decorator.mdx'
import SnippetTSObserver from '/snippets/code/typescript/concepts/traces/observer.mdx'
import SnippetPythonBasicTrace from '/snippets/code/python/concepts/traces/basic-trace.mdx'
import SnippetTSBasicTrace from '/snippets/code/typescript/concepts/traces/basic-trace.mdx'
import SnippetPythonComplexWorkflow from '/snippets/code/python/concepts/traces/complex-workflow.mdx'
import SnippetTSComplexWorkflow from '/snippets/code/typescript/concepts/traces/complex-workflow.mdx'
import SnippetPythonChatApplication from '/snippets/code/python/concepts/traces/chat-application.mdx'
import SnippetTSChatApplication from '/snippets/code/typescript/concepts/traces/chat-application.mdx'

Traces in Galileo are collections of related <a href="/concepts/spans">spans</a> that represent complete interactions or workflows in your AI application. They provide a holistic view of how your application processes requests, from initial input to final output, capturing all the intermediate steps along the way.

A **trace** is essentially a record of a complete user interaction or system process, showing the full journey of data through your application. Traces organize individual spans (discrete operations like LLM calls, retrievals, or tool executions) into a coherent, hierarchical structure that makes it easy to understand the flow and relationships between different parts of your application.

### The Role of Traces in Monitoring System Behavior

Traces play a critical role in monitoring and understanding AI system behavior:

1. **End-to-End Visibility**: Traces provide complete visibility into how your application processes requests, from initial input to final output.

2. **Workflow Reconstruction**: They allow you to reconstruct exactly what happened during an interaction, making it easier to understand complex processes.

3. **Performance Analysis**: Traces help identify bottlenecks and inefficiencies by showing the time spent in each step of a process.

4. **Error Diagnosis**: When issues occur, traces provide the context needed to understand what went wrong and why.

5. **Quality Assessment**: Traces enable evaluation of output quality in the context of the complete interaction.

### Why Traces Are Important

Traces are foundational to effective AI system monitoring and optimization for several reasons:

1. **Context Preservation**: Traces maintain the relationship between different operations, preserving the context that might be lost when looking at individual spans in isolation.

2. **Causal Analysis**: They enable causal analysis by showing the sequence of events that led to a particular outcome.

3. **System-Level Insights**: Traces provide insights at the system level, helping you understand how different components interact.

4. **Debugging Efficiency**: When debugging issues, traces reduce the time needed to understand what happened by providing a complete picture of the interaction.

5. **Optimization Opportunities**: By analyzing traces, you can identify opportunities to optimize your AI workflows for better performance and resource utilization.

## Key Components of a Trace

A trace in Galileo consists of several core components:

### Spans: The Building Blocks

Spans are the fundamental building blocks of traces. Each span represents a discrete operation or step in your application, such as:

- An LLM call
- A document retrieval operation
- A tool execution
- A workflow or processing step

Spans contain detailed information about the operation they represent, including:
- Input data
- Output results
- Duration
- Configuration parameters
- Error information (if applicable)

### Hierarchical Structure

Traces organize spans in a hierarchical structure:

- **Root Span**: The top-level span that represents the entire interaction
- **Parent Spans**: Spans that contain child spans, often representing workflows or logical groupings of operations
- **Child Spans**: Spans that are contained within parent spans, representing individual operations within a workflow

This hierarchical structure allows you to understand both the overall interaction and the specific details of each step.

### Metadata and Session Tags

Traces include metadata and session tags that provide additional context:

- **Metadata**: Additional information about the trace, such as user IDs, session information, or application-specific data
- **Session Tags**: Labels that help categorize and filter traces, making it easier to find relevant traces later

### Timing Information

Traces capture detailed timing information:

- **Start Time**: When the trace began
- **End Time**: When the trace completed
- **Duration**: The total time taken for the complete interaction
- **Span Durations**: The time taken for each individual span within the trace

This timing information is crucial for performance analysis and optimization.

## Creating and Managing Traces

Galileo provides several methods for creating and managing traces, each offering different levels of control and convenience.

### Using the Galileo SDK

<CodeGroup>
<SnippetPythonGalileoLogger />
<SnippetTSGalileoLogger />
</CodeGroup>

### Using Context Managers/Wrappers

<CodeGroup>
<SnippetPythonContextManager />
<SnippetTSContextWrapper />
</CodeGroup>

### Using Integration Wrappers

<CodeGroup>
<SnippetPythonOpenAIWrapper />
<SnippetTSOpenAIWrapper />
</CodeGroup>

### Using Decorators/Observers

<CodeGroup>
<SnippetPythonDecorator />
<SnippetTSObserver />
</CodeGroup>

### Required Configurations

When creating traces, you need to provide:

- **Input**: The initial input to the trace
- **Project** (optional): The Galileo project to log to (defaults to environment variable)
- **Log Stream** (optional): The specific log stream within the project (defaults to environment variable)
- **Tags** (optional): Labels for categorization
- **Metadata** (optional): Additional contextual information

### Customization Options

Traces can be customized in several ways:

- **Tags**: Add tags to categorize traces and make them easier to filter
- **Metadata**: Include additional context such as user IDs, session information, or application-specific data
- **Span Hierarchy**: Create nested spans to represent complex workflows
- **Error Handling**: Capture and log errors for better debugging

## Using Traces in Practice

### Common Use Cases

Traces in Galileo are valuable for a wide range of use cases:

1. **Debugging Complex Workflows**: When issues arise in multi-step processes, traces provide the context needed to understand what went wrong and why.

2. **Performance Optimization**: Analyze traces to identify bottlenecks and opportunities for improvement in your AI workflows.

3. **Quality Monitoring**: Track the quality of AI outputs over time in the context of complete interactions.

4. **User Experience Analysis**: Understand how users interact with your AI application and identify areas for enhancement.

5. **System Architecture Evaluation**: Evaluate the effectiveness of your system architecture by analyzing how different components interact.

6. **A/B Testing**: Compare different models, prompts, or configurations in the context of complete interactions.

### Identifying Failure Modes

Traces help identify failure modes in several ways:

- **Error Tracking**: Traces capture errors and exceptions, making it easier to understand when and why failures occur.

- **Sequence Analysis**: By analyzing the sequence of spans in a trace, you can identify patterns that lead to failures.

- **Performance Anomalies**: Unusual timing patterns in traces can signal potential issues.

- **Content Analysis**: Examining the content of inputs and outputs across a trace can reveal unexpected behaviors or responses.

### Optimizing Performance

Traces provide valuable insights for performance optimization:

- **Bottleneck Identification**: Identify which spans take the most time and focus optimization efforts there.

- **Parallel Processing Opportunities**: Identify operations that could be parallelized to improve overall performance.

- **Caching Opportunities**: Identify repeated operations that could benefit from caching.

- **Resource Utilization**: Understand how resources are used across different parts of your application.

### Best Practices

When working with traces, follow these best practices:

1. **Trace Granularity**: Create traces at an appropriate level of granularity - too fine-grained and you'll have too many traces to manage, too coarse-grained and you'll miss important details.

2. **Meaningful Span Names**: Use descriptive names for spans to make traces easier to understand.

3. **Include Relevant Metadata**: Add tags and metadata that will be useful for filtering and analysis.

4. **Handle Errors Gracefully**: Log errors in spans to help with debugging and analysis.

5. **Flush Traces Appropriately**: In long-running applications, flush traces at appropriate points to ensure data is sent to Galileo.

## Integration with the Galileo Ecosystem

### Integration with Other Features

Traces integrate seamlessly with other Galileo features:

1. **Logs**: Traces organize logs into a hierarchical structure, providing context for individual log entries.

2. **Spans**: Traces contain spans, which represent individual operations in your application.

3. **Metrics**: Traces feed into metrics, allowing you to measure and monitor key aspects of your AI application.

4. **Experiments**: Traces can be used in experiments to compare different models, prompts, or configurations.

5. **Datasets**: Traces can be converted into datasets for fine-tuning or evaluation.

6. **Alerts**: Patterns in traces can trigger alerts to notify you of issues or anomalies.

### Data Flow

The typical data flow for traces in Galileo is:

1. Your application generates traces using the Galileo SDK
2. Traces are organized into a hierarchical structure of spans
3. Traces are flushed to Galileo (automatically or manually)
4. Galileo processes and stores the traces
5. Traces are available for viewing, analysis, and use in other Galileo features
6. Metrics and evaluations are computed based on the traces
7. Insights derived from traces inform improvements to your AI application

### Dependencies

Traces have dependencies on several Galileo components:

- **Projects**: All traces belong to a specific project
- **Log Streams**: Traces are organized into log streams within projects
- **API Keys**: Authentication is required to send traces to Galileo
- **SDK**: The Galileo SDK is used to generate and send traces

## Examples and Practical Applications

### Basic Trace Creation

<CodeGroup>
<SnippetPythonBasicTrace />
<SnippetTSBasicTrace />
</CodeGroup>

### Complex Workflow with Nested Spans

<CodeGroup>
<SnippetPythonComplexWorkflow />
<SnippetTSComplexWorkflow />
</CodeGroup>

### Chat Application Example

<CodeGroup>
<SnippetPythonChatApplication />
<SnippetTSChatApplication />
</CodeGroup>

## Next Steps

After understanding traces, you can explore these related Galileo features:

### Advanced Trace Analysis

- **Trace Visualization**: Use the Galileo UI to visualize traces and understand the flow of data through your application.
- **Performance Analysis**: Analyze trace timing information to identify bottlenecks and opportunities for improvement.
- **Error Analysis**: Use traces to understand the root causes of errors and exceptions.

### Related Galileo Workflows

- **Metrics**: Set up metrics based on trace data to monitor key aspects of your AI application.
- **Experiments**: Use traces to compare different models, prompts, or configurations.
- **Datasets**: Convert traces into datasets for fine-tuning or evaluation.
- **Alerts**: Configure alerts based on patterns in your traces.

### Further Resources

- [Spans](/concepts/spans) - Understand the different types of spans in Galileo
- [Log Streams](/concepts/logstreams) - Explore how to organize traces into streams
- [Projects](/concepts/projects) - Learn about the top-level organization of Galileo resources
- [Metrics](/concepts/metrics) - Discover how to measure key aspects of your AI application
- [Experiments](/concepts/experiments) - Learn how to compare different approaches


