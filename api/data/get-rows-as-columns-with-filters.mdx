---
title: Get Rows as Columns with Filters
openapi: post /projects/{project_id}/runs/{run_id}/prompts/rows/columnar
---

This endpoint retrieves multiple rows in a columnar format with powerful filtering capabilities. It allows you to search, sort, and filter rows based on various criteria, making it easy to analyze specific subsets of your data. The columnar representation is particularly useful for data analysis and visualization.

## Path Parameters

| Parameter | Type | Description |
| --------- | ---- | ----------- |
| `project_id` | string (UUID) | The unique identifier of the project |
| `run_id` | string (UUID) | The unique identifier of the experiment run |

## Request Body

| Field | Type | Description |
| ----- | ---- | ----------- |
| `filters` | array of objects | Optional. Filters to apply to the rows |
| `sort_by` | object | Optional. Sorting criteria for the results |
| `page` | integer | Optional. Page number for pagination (default: 1) |
| `page_size` | integer | Optional. Number of items per page (default: 50, max: 100) |
| `include_metrics` | boolean | Optional. Whether to include evaluation metrics (default: false) |
| `include_metadata` | boolean | Optional. Whether to include additional metadata (default: false) |
| `columns` | array of strings | Optional. Specific columns to include in the response |

### Filter Object

| Field | Type | Description |
| ----- | ---- | ----------- |
| `field` | string | The field to filter on |
| `operator` | string | Comparison operator: "eq", "neq", "gt", "gte", "lt", "lte", "contains", "not_contains" |
| `value` | any | The value to compare against |

### Sort Object

| Field | Type | Description |
| ----- | ---- | ----------- |
| `field` | string | The field to sort by |
| `direction` | string | Sort direction: "asc" or "desc" |

### Example Request

```json
{
  "filters": [
    {
      "field": "model",
      "operator": "eq",
      "value": "gpt-4"
    },
    {
      "field": "response_time",
      "operator": "lt",
      "value": 2.0
    }
  ],
  "sort_by": {
    "field": "created_at",
    "direction": "desc"
  },
  "page": 1,
  "page_size": 20,
  "include_metrics": true,
  "include_metadata": true,
  "columns": ["prompt", "completion", "model", "response_time", "metrics.accuracy_score"]
}
```

## Response

The response contains multiple rows in a columnar format, filtered and sorted according to the request parameters.

### Example Response

```json
{
  "rows": [
    {
      "row_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "created_at": "2023-05-15T10:00:00Z",
      "columns": {
        "prompt": {
          "name": "User Query",
          "value": "What are the best practices for implementing a secure authentication system?",
          "type": "text"
        },
        "completion": {
          "name": "AI Response",
          "value": "Implementing a secure authentication system requires several best practices...",
          "type": "text"
        },
        "model": {
          "name": "Model",
          "value": "gpt-4",
          "type": "string"
        },
        "response_time": {
          "name": "Response Time",
          "value": 1.8,
          "type": "number"
        },
        "metrics.accuracy_score": {
          "name": "Accuracy Score",
          "value": 0.95,
          "type": "number"
        }
      },
      "metadata": {
        "prompt_template_id": "template_12345",
        "prompt_template_name": "Technical Question Template"
      }
    },
    {
      "row_id": "4fa85f64-5717-4562-b3fc-2c963f66afa7",
      "created_at": "2023-05-14T15:30:00Z",
      "columns": {
        "prompt": {
          "name": "User Query",
          "value": "How can I optimize database performance for a high-traffic web application?",
          "type": "text"
        },
        "completion": {
          "name": "AI Response",
          "value": "To optimize database performance for high-traffic web applications, consider the following strategies...",
          "type": "text"
        },
        "model": {
          "name": "Model",
          "value": "gpt-4",
          "type": "string"
        },
        "response_time": {
          "name": "Response Time",
          "value": 1.9,
          "type": "number"
        },
        "metrics.accuracy_score": {
          "name": "Accuracy Score",
          "value": 0.92,
          "type": "number"
        }
      },
      "metadata": {
        "prompt_template_id": "template_67890",
        "prompt_template_name": "Database Optimization Template"
      }
    }
  ],
  "pagination": {
    "page": 1,
    "page_size": 20,
    "total_items": 45,
    "total_pages": 3
  }
}
```

## Error Responses

| Status Code | Description |
| ----------- | ----------- |
| `404` | Project or run not found |
| `403` | Insufficient permissions to access the data |
| `400` | Invalid request body or parameters |

## Security

This endpoint requires authentication. You can authenticate using:

- An API key in the `Galileo-API-Key` header
- OAuth2 password flow
- HTTP Basic authentication

## Notes

- Use the `filters` parameter to narrow down the results based on specific criteria
- The `columns` parameter allows you to specify which fields to include in the response, reducing payload size
- The columnar format provides a structured representation of the row data, with each field represented as a named column
- Each column includes a name, value, and type, making it easier to understand and process the data
- Including metrics provides performance data for each row, which can be useful for comparative analysis
- Including metadata provides additional context about each row, such as template information
- For large datasets, use pagination to manage response size and loading times
- This endpoint is particularly useful for analyzing patterns and trends across multiple prompts and completions