---
title: Get Prompt Chain Rows
openapi: get /projects/{project_id}/runs/{run_id}/chains/{chain_id}
---

This endpoint retrieves detailed information about all rows in a specific prompt chain. Prompt chains represent multi-step processes where the output of one step becomes the input for the next step. This endpoint provides comprehensive data about each row in the chain, including prompts, completions, and metadata for each step in the sequence.

## Response

The response contains detailed information about all rows in the specified prompt chain.

### Example Response

```json
{
  "chain_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "chain_name": "RAG Processing Chain",
  "total_steps": 3,
  "steps": [
    {
      "step_id": "step_1",
      "step_name": "Query Processing",
      "step_type": "prompt_completion"
    },
    {
      "step_id": "step_2",
      "step_name": "Document Retrieval",
      "step_type": "retrieval"
    },
    {
      "step_id": "step_3",
      "step_name": "Answer Generation",
      "step_type": "prompt_completion"
    }
  ],
  "rows": [
    {
      "row_id": "row_12345",
      "created_at": "2023-05-15T10:00:00Z",
      "step_data": [
        {
          "step_id": "step_1",
          "prompt": "Process the following query: How do I configure SSL certificates?",
          "completion": "PROCESSED: configure SSL certificates",
          "metrics": {
            "processing_time": 0.2,
            "quality_score": 0.95
          },
          "metadata": {
            "model": "gpt-3.5-turbo",
            "tokens": 45
          }
        },
        {
          "step_id": "step_2",
          "input": "configure SSL certificates",
          "output": "Found 3 documents: [doc1, doc2, doc3]",
          "metrics": {
            "retrieval_time": 0.3,
            "relevance_score": 0.88
          },
          "metadata": {
            "retrieval_method": "vector_search",
            "documents_found": 3
          }
        },
        {
          "step_id": "step_3",
          "prompt": "Using these documents, answer: How do I configure SSL certificates?\n\nDocuments:\n1. [doc1 content]\n2. [doc2 content]\n3. [doc3 content]",
          "completion": "To configure SSL certificates, you need to follow these steps:\n1. Generate a certificate signing request (CSR)\n2. Obtain an SSL certificate from a certificate authority\n3. Install the certificate on your server\n4. Configure your web server to use the certificate\n5. Test the configuration",
          "metrics": {
            "response_time": 1.2,
            "completeness_score": 0.92,
            "accuracy_score": 0.95
          },
          "metadata": {
            "model": "gpt-4",
            "tokens": 320
          }
        }
      ]
    },
    {
      "row_id": "row_67890",
      "created_at": "2023-05-15T10:15:00Z",
      "step_data": [
        {
          "step_id": "step_1",
          "prompt": "Process the following query: What are the system requirements?",
          "completion": "PROCESSED: system requirements",
          "metrics": {
            "processing_time": 0.18,
            "quality_score": 0.97
          },
          "metadata": {
            "model": "gpt-3.5-turbo",
            "tokens": 38
          }
        },
        {
          "step_id": "step_2",
          "input": "system requirements",
          "output": "Found 2 documents: [doc4, doc5]",
          "metrics": {
            "retrieval_time": 0.25,
            "relevance_score": 0.92
          },
          "metadata": {
            "retrieval_method": "vector_search",
            "documents_found": 2
          }
        },
        {
          "step_id": "step_3",
          "prompt": "Using these documents, answer: What are the system requirements?\n\nDocuments:\n1. [doc4 content]\n2. [doc5 content]",
          "completion": "The system requirements are:\n- Operating System: Windows 10/11, macOS 12+, or Linux Ubuntu 20.04+\n- Processor: Intel i5 or equivalent (8th gen or newer)\n- RAM: 8GB minimum, 16GB recommended\n- Storage: 100GB SSD\n- Network: Broadband internet connection",
          "metrics": {
            "response_time": 1.0,
            "completeness_score": 0.96,
            "accuracy_score": 0.98
          },
          "metadata": {
            "model": "gpt-4",
            "tokens": 280
          }
        }
      ]
    }
  ],
  "pagination": {
    "page": 1,
    "page_size": 50,
    "total_items": 2,
    "total_pages": 1
  }
}
```

## Error Responses

| Status Code | Description |
| ----------- | ----------- |
| `404` | Project, run, or chain not found |
| `403` | Insufficient permissions to access the data |
| `400` | Invalid query parameters |

## Notes

- This endpoint is particularly useful for analyzing multi-step processes like RAG (Retrieval-Augmented Generation)
- The response includes information about each step in the chain and the data for each row
- Including metrics provides performance data for each step, which can help identify bottlenecks
- Including metadata provides additional context about the configuration used for each step
- For chains with many rows, use pagination to manage response size
- This endpoint provides a sequential view of the data, while the Get Chain as Columns endpoint provides a columnar view
- The step_type field indicates the nature of each step (prompt_completion, retrieval, etc.)