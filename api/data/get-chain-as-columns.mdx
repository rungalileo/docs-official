---
title: Get Chain as Columns
openapi: get /projects/{project_id}/runs/{run_id}/prompts/rows/chains/{chain_id}/columnar
---

This endpoint retrieves data from a specific prompt chain in a columnar format, making it easier to analyze and visualize multi-step prompt chains. The columnar representation organizes each step of the chain as a separate column, allowing you to see the progression of prompts, completions, and metadata across the entire chain.

### Example Response

```json
{
  "chain_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "chain_name": "RAG Processing Chain",
  "total_steps": 3,
  "columns": [
    {
      "step_id": "step_1",
      "step_name": "Query Processing",
      "prompts": ["Process the following query: How do I configure SSL certificates?", "Process the following query: What are the system requirements?"],
      "completions": ["PROCESSED: configure SSL certificates", "PROCESSED: system requirements"],
      "metadata": [
        {
          "model": "gpt-4o",
          "tokens": 45
        },
        {
          "model": "gpt-4o",
          "tokens": 38
        }
      ]
    },
    {
      "step_id": "step_2",
      "step_name": "Document Retrieval",
      "prompts": ["Find documents about: configure SSL certificates", "Find documents about: system requirements"],
      "completions": ["Found 3 documents: [doc1, doc2, doc3]", "Found 2 documents: [doc4, doc5]"],
      "metadata": [
        {
          "retrieval_method": "vector_search",
          "documents_found": 3
        },
        {
          "retrieval_method": "vector_search",
          "documents_found": 2
        }
      ]
    },
    {
      "step_id": "step_3",
      "step_name": "Answer Generation",
      "prompts": ["Using these documents, answer: How do I configure SSL certificates?", "Using these documents, answer: What are the system requirements?"],
      "completions": ["To configure SSL certificates, you need to...", "The system requirements include..."],
      "metadata": [
        {
          "model": "gpt-4",
          "tokens": 320
        },
        {
          "model": "gpt-4",
          "tokens": 280
        }
      ]
    }
  ],
  "pagination": {
    "page": 1,
    "page_size": 50,
    "total_items": 2,
    "total_pages": 1
  }
}
```

## Error Responses

| Status Code | Description                                 |
| ----------- | ------------------------------------------- |
| `404`       | Project, run, or chain not found            |
| `403`       | Insufficient permissions to access the data |
| `400`       | Invalid query parameters                    |

## Notes

- This endpoint is particularly useful for analyzing multi-step prompt chains like RAG (Retrieval-Augmented Generation) processes
- The columnar format makes it easier to visualize the flow of information through each step of the chain
- Including metrics can help identify which steps in the chain might be causing issues or bottlenecks
- For chains with many rows, use pagination to manage response size and loading times
- This representation can be easily imported into data analysis tools or visualization libraries
